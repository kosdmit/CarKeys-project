{% extends 'blocks/modals/modal-base.html' %}

{% block modal-id %}detail-view-modal-{{ goods.pk }}{% endblock %}

{% block title-image %}
  <img src="{{ goods.image.url }}" alt="goods image" class="rounded-top-2">
{% endblock %}

{% block modal-header %}
  <h1 class="modal-title fs-5" id="">{{ goods.title }}</h1>
{% endblock %}

{% block modal-body %}
  <p>{{ goods.description }}</p>
  {% for param in goods.parameter_set.all %}
    <div class="row">
      <dt class="col-sm-6">{{ param.title }}</dt>
      <dd class="col-sm-6">{{ param.value }}</dd>
    </div>
  {% endfor %}
  {% if goods.parent %}
    {% include 'app_ecomerce/blocks/detail-view-modal-nav-bar.html' %}
  {% endif %}
{% endblock %}

{% block modal-footer %}
  <span class="fs-4">{{ goods.price }} ₽</span>
  {% if goods.count > 0 %}
    <span class="badge text-bg-primary rounded-pill me-auto text-white">В наличии</span>
  {% else %}
    <span class="badge text-bg-secondary rounded-pill me-auto text-white">Нет в наличии</span>
  {% endif %}
  <div class="buttons d-flex justify-content-center mt-3 mt-sm-0">
    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Закрыть</button>
    <button type="button" class="btn btn-primary order-button" data-obj-id="{{ goods.pk }}"
            {% if goods.pk|slugify in request.session.ordered_goods %}style="display: none;"{% endif %}
    >
      Заказать
    </button>
    <button class="btn btn-primary text-white" type="button" disabled style="display: none;">
      <span class="spinner-border spinner-border-sm text-white" role="status" aria-hidden="true"></span>
      Отправка...
    </button>
    <button class="btn btn-primary text-white" type="button"
            {% if not goods.pk|slugify in request.session.ordered_goods %}style="display: none;"{% endif %}
            data-bs-toggle="modal" data-bs-target="#get-contacts-modal">
      <svg id="successAnimation" class="animated" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 70 70">
        <path id="successAnimationResult" fill="#D8D8D8" d="M35,60 C21.1928813,60 10,48.8071187 10,35 C10,21.1928813 21.1928813,10 35,10 C48.8071187,10 60,21.1928813 60,35 C60,48.8071187 48.8071187,60 35,60 Z M23.6332378,33.2260427 L22.3667622,34.7739573 L34.1433655,44.40936 L47.776114,27.6305926 L46.223886,26.3694074 L33.8566345,41.59064 L23.6332378,33.2260427 Z"/>
        <circle id="successAnimationCircle" cx="35" cy="35" r="24" stroke="#979797" stroke-width="2" stroke-linecap="round" fill="transparent"/>
        <polyline id="successAnimationCheck" stroke="#979797" stroke-width="2" points="23 34 34 43 47 27" fill="transparent"/>
      </svg>
      Успешно
    </button>
  </div>
{% endblock %}
